{
  "namespaces": {
    "dyn": "https://dynamat.utep.edu/ontology#"
  },
  
  "visibility_dependencies": [
    {
      "id": "composite_properties",
      "description": "Show composite properties when material is composite",
      "trigger_field": "dyn:hasMaterial",
      "condition": {
        "type": "instance_of",
        "class": "dyn:Composite"
      },
      "actions": {
        "show_groups": ["Composite Properties"],
        "show_fields": [
          "dyn:hasMatrixMaterial",
          "dyn:hasReinforcementMaterial",
          "dyn:hasMatrixVolumeFraction",
          "dyn:hasReinforcementVolumeFraction",
          "dyn:hasPhaseDistributionID"
        ]
      }
    },
    {
      "id": "metal_properties",
      "description": "Show metal-specific properties when material is metal",
      "trigger_field": "dyn:hasMaterial",
      "condition": {
        "type": "instance_of",
        "class": "dyn:Metal"
      },
      "actions": {
        "show_fields": [
          "dyn:hasGrainSize",
          "dyn:hasHeatTreatment",
          "dyn:hasTemper"
        ],
        "hide_groups": ["Composite Properties"]
      }
    },
    {
      "id": "lattice_structure",
      "description": "Show lattice properties when structure is lattice",
      "trigger_field": "dyn:hasStructure",
      "condition": {
        "type": "equals",
        "value": "dyn:LatticeStructure"
      },
      "actions": {
        "show_groups": ["Lattice Properties"],
        "show_fields": [
          "dyn:hasUnitCellType",
          "dyn:hasRelativeDensity",
          "dyn:hasStrutDiameter"
        ]
      }
    },
    {
      "id": "cylindrical_dimensions",
      "description": "Show cylindrical dimensions when shape is cylindrical",
      "trigger_field": "dyn:hasShape",
      "condition": {
        "type": "equals",
        "value": "dyn:CylindricalShape"
      },
      "actions": {
        "show_fields": [
          "dyn:hasDiameter",
          "dyn:hasLength"
        ],
        "hide_fields": [
          "dyn:hasWidth",
          "dyn:hasHeight",
          "dyn:hasThickness"
        ]
      }
    }
  ],
  
  "value_dependencies": [
    {
      "id": "specimen_id_generation",
      "description": "Auto-generate specimen ID from components",
      "triggers": [
        "dyn:hasMaterialCode",
        "dyn:hasSpecimenBatchID"
      ],
      "target": "dyn:hasSpecimenID",
      "function": "generate_specimen_id",
      "params": {
        "format": "SPN-{material}-{batch}-{seq:03d}",
        "readonly": true
      }
    },
    {
      "id": "volume_calculation",
      "description": "Calculate volume from dimensions",
      "triggers": [
        "dyn:hasDiameter",
        "dyn:hasLength"
      ],
      "target": "dyn:hasVolume",
      "function": "calculate_cylinder_volume",
      "params": {
        "unit": "mm3",
        "precision": 2
      }
    },
    {
      "id": "density_calculation",
      "description": "Calculate density from mass and volume",
      "triggers": [
        "dyn:hasMass",
        "dyn:hasVolume"
      ],
      "target": "dyn:hasDensity",
      "function": "calculate_density",
      "params": {
        "unit": "g/cm3",
        "precision": 3
      }
    }
  ],
  
  "validation_dependencies": [
    {
      "id": "composite_validation",
      "description": "Require matrix and reinforcement for composites",
      "trigger_field": "dyn:hasMaterial",
      "condition": {
        "type": "instance_of",
        "class": "dyn:Composite"
      },
      "required_fields": [
        "dyn:hasMatrixMaterial",
        "dyn:hasReinforcementMaterial"
      ]
    }
  ]
}