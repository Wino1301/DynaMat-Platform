@prefix gui: <https://dynamat.utep.edu/gui/constraints#> .
@prefix dyn: <https://dynamat.utep.edu/ontology#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#################################################################
# SPECIMEN FORM CONSTRAINTS (Unified Format)
#################################################################

#================================================================
# Specimen ID Generation
#================================================================

gui:specimen_c001 a gui:Constraint ;
    rdfs:label "Generate Specimen ID from Material" ;
    rdfs:comment "Auto-generates specimen ID in format DYNML-{materialCode}-{sequence} when material is selected. The materialCode is extracted from the selected material individual." ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers dyn:hasMaterial ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue gui:anyValue ;
    gui:generationTarget dyn:hasSpecimenID ;
    gui:generationTemplate "DYNML-{materialCode}-{sequence}" ;
    gui:generationInputs (dyn:hasMaterial) ;
    gui:priority 1 .

#================================================================
# Composite Material Fields Visibility
#================================================================

gui:specimen_c002 a gui:Constraint ;
    rdfs:label "Show composite fields for composite materials" ;
    rdfs:comment "Displays matrix/reinforcement fields when selected material is of type Composite. Uses class membership check." ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers dyn:hasMaterial ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue dyn:Composite ;
    gui:showFields (dyn:hasMatrixMaterial
                    dyn:hasReinforcementMaterial
                    dyn:hasMatrixVolumeFraction
                    dyn:hasReinforcementVolumeFraction
                    dyn:hasPhaseDistributionID) ;
    gui:priority 2 .

#================================================================
# Post-Test Dimensions Visibility
#================================================================

gui:specimen_c003 a gui:Constraint ;
    rdfs:label "Hide post-test dimensions for non-testing specimen roles" ;
    rdfs:comment "Hides post-test dimension fields when specimen role is Characterization, Reference, or Calibration (specimens not subjected to destructive testing)." ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers dyn:hasSpecimenRole ;
    gui:triggerLogic gui:ANY ;
    gui:whenValue dyn:CharacterizationSpecimen,
                  dyn:ReferenceSpecimen,
                  dyn:CalibrationSpecimen ;
    gui:hideFields (dyn:hasFinalLength
                    dyn:hasFinalDiameter
                    dyn:hasFinalCrossSection
                    dyn:hasFinalThickness
                    dyn:hasFinalHeight
                    dyn:hasFinalWidth
                    dyn:hasFinalMass
                    dyn:hasFinalGaugeLength) ;
    gui:priority 3 .

#================================================================
# Lattice Structure Parameters Visibility
#================================================================

gui:specimen_c004 a gui:Constraint ;
    rdfs:label "Show structure parameters for lattice structures" ;
    rdfs:comment "Displays structure parameter fields only when structure type is Lattice. Hides these fields for all other structure types (Monolithic, Foam, Graded, etc.)." ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers dyn:hasStructure ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue dyn:LatticeStructure ;
    gui:showFields (dyn:hasLatticeCellsX
                    dyn:hasLatticeCellsY
                    dyn:hasLatticeCellsZ
                    dyn:hasVoxelSize
                    dyn:hasLatticeNodeRadius
                    dyn:hasLatticeStrutMinX
                    dyn:hasLatticeStrutMaxX
                    dyn:hasLatticeStrutMinY
                    dyn:hasLatticeStrutMaxY
                    dyn:hasLatticeStrutMinZ
                    dyn:hasLatticeStrutMaxZ
                    dyn:hasLatticeNx
                    dyn:hasLatticeNy
                    dyn:hasLatticeNz
                    dyn:hasLatticeRingThickness) ;
    gui:priority 4 .

#================================================================
# Cylindrical Shape: Visibility + Cross Section Calculation
#================================================================

gui:specimen_c005 a gui:Constraint ;
    rdfs:label "Cylindrical specimen: original dimensions and cross-section" ;
    rdfs:comment "For cylindrical specimens, show diameter and height, hide other dimensions, and calculate cross-section from diameter. Formula: A = pi * (d/2)^2" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasOriginalDiameter) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:CylindricalShape gui:anyValue) ;
    gui:showFields (dyn:hasOriginalDiameter dyn:hasOriginalHeight) ;
    gui:hideFields (dyn:hasOriginalLength
                    dyn:hasOriginalWidth
                    dyn:hasOriginalThickness
                    dyn:hasOriginalGaugeLength) ;
    gui:calculationFunction "circular_area_from_diameter" ;
    gui:calculationTarget dyn:hasOriginalCrossSection ;
    gui:calculationInputs (dyn:hasOriginalDiameter) ;
    gui:priority 5 .

gui:specimen_c006 a gui:Constraint ;
    rdfs:label "Cylindrical specimen: post-test dimensions and cross-section" ;
    rdfs:comment "For cylindrical specimens, show final diameter and height, hide other dimensions, and calculate cross-section from diameter. Formula: A = π(d/2)²" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasFinalDiameter) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:CylindricalShape gui:anyValue) ;
    gui:showFields (dyn:hasFinalDiameter dyn:hasFinalHeight) ;
    gui:hideFields (dyn:hasFinalLength
                    dyn:hasFinalWidth
                    dyn:hasFinalThickness
                    dyn:hasFinalGaugeLength) ;
    gui:calculationFunction "circular_area_from_diameter" ;
    gui:calculationTarget dyn:hasFinalCrossSection ;
    gui:calculationInputs (dyn:hasFinalDiameter) ;
    gui:priority 6 .

#================================================================
# Cubic Shape: Visibility + Cross Section Calculation
#================================================================

gui:specimen_c007 a gui:Constraint ;
    rdfs:label "Cubic specimen: original dimensions and cross-section" ;
    rdfs:comment "For cubic specimens, show length (as cube side), hide other dimensions, and calculate cross-section from length. Formula: A = length²" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasOriginalLength) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:CubicShape gui:anyValue) ;
    gui:showFields (dyn:hasOriginalLength) ;
    gui:hideFields (dyn:hasOriginalDiameter
                    dyn:hasOriginalWidth
                    dyn:hasOriginalThickness
                    dyn:hasOriginalHeight
                    dyn:hasOriginalGaugeLength) ;
    gui:calculationFunction "square_area" ;
    gui:calculationTarget dyn:hasOriginalCrossSection ;
    gui:calculationInputs (dyn:hasOriginalLength) ;
    gui:priority 7 .

gui:specimen_c008 a gui:Constraint ;
    rdfs:label "Cubic specimen: post-test dimensions and cross-section" ;
    rdfs:comment "For cubic specimens, show final length, hide other dimensions, and calculate cross-section from length. Formula: A = length²" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasFinalLength) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:CubicShape gui:anyValue) ;
    gui:showFields (dyn:hasFinalLength) ;
    gui:hideFields (dyn:hasFinalDiameter
                    dyn:hasFinalWidth
                    dyn:hasFinalThickness
                    dyn:hasFinalHeight
                    dyn:hasFinalGaugeLength) ;
    gui:calculationFunction "square_area" ;
    gui:calculationTarget dyn:hasFinalCrossSection ;
    gui:calculationInputs (dyn:hasFinalLength) ;
    gui:priority 8 .

#================================================================
# Dogbone Shape: Visibility + Cross Section Calculation
#================================================================

gui:specimen_c009 a gui:Constraint ;
    rdfs:label "Dogbone specimen: original dimensions and cross-section" ;
    rdfs:comment "For dogbone specimens, show length, gauge length, width, and thickness, hide other dimensions, and calculate cross-section from width × thickness. Formula: A = width × thickness" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasOriginalWidth dyn:hasOriginalThickness) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:DogboneShape gui:anyValue gui:anyValue) ;
    gui:showFields (dyn:hasOriginalLength
                    dyn:hasOriginalGaugeLength
                    dyn:hasOriginalWidth
                    dyn:hasOriginalThickness) ;
    gui:hideFields (dyn:hasOriginalDiameter dyn:hasOriginalHeight) ;
    gui:calculationFunction "rectangular_area" ;
    gui:calculationTarget dyn:hasOriginalCrossSection ;
    gui:calculationInputs (dyn:hasOriginalWidth dyn:hasOriginalThickness) ;
    gui:priority 9 .

gui:specimen_c010 a gui:Constraint ;
    rdfs:label "Dogbone specimen: post-test dimensions and cross-section" ;
    rdfs:comment "For dogbone specimens, show final length, gauge length, width, and thickness, hide other dimensions, and calculate cross-section from width × thickness. Formula: A = width × thickness" ;
    dc:created "2025-01-15"^^xsd:date ;
    gui:forClass dyn:Specimen ;
    gui:triggers (dyn:hasShape dyn:hasFinalWidth dyn:hasFinalThickness) ;
    gui:triggerLogic gui:ALL ;
    gui:whenValue (dyn:DogboneShape gui:anyValue gui:anyValue) ;
    gui:showFields (dyn:hasFinalLength
                    dyn:hasFinalGaugeLength
                    dyn:hasFinalWidth
                    dyn:hasFinalThickness) ;
    gui:hideFields (dyn:hasFinalDiameter dyn:hasFinalHeight) ;
    gui:calculationFunction "rectangular_area" ;
    gui:calculationTarget dyn:hasFinalCrossSection ;
    gui:calculationInputs (dyn:hasFinalWidth dyn:hasFinalThickness) ;
    gui:priority 10 .
